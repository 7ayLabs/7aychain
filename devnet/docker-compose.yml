services:
  alice:
    build:
      context: ..
      dockerfile: devnet/Dockerfile
    container_name: seveny-alice
    ports:
      - "9944:9944"
      - "9933:9933"
      - "30333:30333"
    volumes:
      - alice-data:/node/data
    command:
      - "--alice"
      - "--validator"
      - "--chain=local"
      - "--base-path=/node/data"
      - "--rpc-cors=all"
      - "--rpc-external"
      - "--rpc-methods=unsafe"
      - "--node-key=0000000000000000000000000000000000000000000000000000000000000001"
    networks:
      - seveny-net
    restart: unless-stopped

  bob:
    build:
      context: ..
      dockerfile: devnet/Dockerfile
    container_name: seveny-bob
    ports:
      - "9945:9944"
      - "9934:9933"
      - "30334:30333"
    volumes:
      - bob-data:/node/data
    command:
      - "--bob"
      - "--validator"
      - "--chain=local"
      - "--base-path=/node/data"
      - "--rpc-cors=all"
      - "--rpc-external"
      - "--rpc-methods=unsafe"
      - "--bootnodes=/dns/alice/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp"
    networks:
      - seveny-net
    depends_on:
      - alice
    restart: unless-stopped

  charlie:
    build:
      context: ..
      dockerfile: devnet/Dockerfile
    container_name: seveny-charlie
    ports:
      - "9946:9944"
      - "9935:9933"
      - "30335:30333"
    volumes:
      - charlie-data:/node/data
    command:
      - "--charlie"
      - "--validator"
      - "--chain=local"
      - "--base-path=/node/data"
      - "--rpc-cors=all"
      - "--rpc-external"
      - "--rpc-methods=unsafe"
      - "--bootnodes=/dns/alice/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp"
    networks:
      - seveny-net
    depends_on:
      - alice
    restart: unless-stopped

networks:
  seveny-net:
    driver: bridge

volumes:
  alice-data:
  bob-data:
  charlie-data:
